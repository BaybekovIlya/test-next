(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{4293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5155),s=r(2115);let a=e=>{let{onSubmit:t,error:r,loading:a}=e,[o,i]=(0,s.useState)(""),[l,c]=(0,s.useState)("");return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-black",children:"Вход в систему"}),r&&(0,n.jsx)("div",{className:"mb-4 text-red-500 text-center",children:r}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({username:o,password:l})},children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"username",children:"Логин"}),(0,n.jsx)("input",{id:"username",type:"text",className:"w-full px-3 py-2 border rounded-lg text-black",value:o,onChange:e=>i(e.target.value),required:!0,disabled:a})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"password",children:"Пароль"}),(0,n.jsx)("input",{id:"password",type:"password",className:"w-full px-3 py-2 border rounded-lg text-black",value:l,onChange:e=>c(e.target.value),required:!0,disabled:a})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition disabled:opacity-50 cursor-pointer",disabled:a,children:a?"Вход...":"Войти"})]})]})})};var o=r(5695),i=r(7383);let l=()=>{let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(""),[n,a]=(0,s.useState)(!1);return{login:async t=>{let{username:n,password:s}=t;r(""),a(!0);try{if(n&&s)i.A.set("auth_token","mock_auth_token",{expires:1}),e.push("/");else throw Error("Введите логин и пароль");let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:s})}),r=await t.json();if(!t.ok)throw Error(r.message||"Ошибка авторизации");i.A.set("auth_token",r.token,{expires:1}),e.push("/")}catch(e){r(e instanceof Error?e.message:"Ошибка соединения с сервером")}finally{a(!1)}},error:t,loading:n}};var c=r(8109);function d(){let{login:e,error:t,loading:r}=l();return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(c.A,{}),children:(0,n.jsx)(a,{onSubmit:e,error:t,loading:r})})}},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},7383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,a){if("undefined"!=typeof document){"number"==typeof(a=n({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a){if(a[i])o+="; "+i,!0!==a[i]&&(o+="="+a[i].split(";")[0])}return document.cookie=e+"="+t.write(s,e)+o}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var a=r[s].split("="),o=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(n[i]=t.read(o,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},7609:e=>{e.exports={loader:"Loader_loader__dFQzP",spin:"Loader_spin__11Ai7","loader-container":"Loader_loader-container__s8kNB"}},8109:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(5155);r(2115);var s=r(7609),a=r.n(s);let o=()=>(0,n.jsx)("div",{className:a()["loader-container"],children:(0,n.jsx)("div",{className:a().loader})})},9769:(e,t,r)=>{Promise.resolve().then(r.bind(r,4293))}},e=>{var t=t=>e(e.s=t);e.O(0,[438,441,684,358],()=>t(9769)),_N_E=e.O()}]);