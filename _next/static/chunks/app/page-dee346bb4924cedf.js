(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2885:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(5155),s=r(2115),i=r(5695),a=r(7383),l=r(5108);let o=()=>({fullName:l.b.person.fullName(),phone:l.b.phone.number(),email:l.b.internet.email(),address:l.b.location.streetAddress()}),c=()=>{let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0),l=(0,i.useRouter)();return(0,s.useEffect)(()=>{if(!a.A.get("auth_token")){l.push("/login?redirect=/");return}(async()=>{try{let e=await fetch("/api/profile");if(e.ok){let r=await e.json();t(r)}else t(o())}catch(e){console.error("Ошибка загрузки профиля:",e),t(o())}finally{n(!1)}})()},[l]),{profile:e,loading:r,handleLogout:()=>{a.A.remove("auth_token"),l.push("/login")}}};var d=r(8109);let u=e=>{let{profile:t,loading:r,handleLogout:s}=e,a=(0,i.useRouter)();return r?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-xl text-black",children:(0,n.jsx)(d.A,{})})}):t?(0,n.jsx)("section",{className:"min-h-screen py-12",children:(0,n.jsx)("div",{className:"px-4",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md overflow-hidden p-6",children:[(0,n.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-800",children:t.fullName}),(0,n.jsxs)("p",{className:"text-gray-600",children:["+7",t.phone]})]}),(0,n.jsx)("button",{onClick:s,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition cursor-pointer",children:"Выйти"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Информация о профиле"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"Email"}),(0,n.jsx)("p",{className:"text-gray-800",children:t.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"Адрес"}),(0,n.jsx)("p",{className:"text-gray-800",children:t.address})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)("button",{onClick:()=>a.push("/dashboard"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition cursor-pointer",children:"Перейти в дашборд"}),(0,n.jsx)("button",{onClick:()=>a.push("/about"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition cursor-pointer",children:"О сервисе"})]})]})})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-xl text-red-500",children:"Ошибка загрузки профиля"})})};function h(){let{profile:e,loading:t,handleLogout:r}=c();return(0,n.jsx)(u,{profile:e,loading:t,handleLogout:r})}},5089:(e,t,r)=>{Promise.resolve().then(r.bind(r,2885))},7383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in i){if(i[l])a+="; "+l,!0!==i[l]&&(a+="="+i[l].split(";")[0])}return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var i=r[s].split("="),a=i.slice(1).join("=");try{var l=decodeURIComponent(i[0]);if(n[l]=t.read(a,l),e===l)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},7609:e=>{e.exports={loader:"Loader_loader__dFQzP",spin:"Loader_spin__11Ai7","loader-container":"Loader_loader-container__s8kNB"}},8109:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5155);r(2115);var s=r(7609),i=r.n(s);let a=()=>(0,n.jsx)("div",{className:i()["loader-container"],children:(0,n.jsx)("div",{className:i().loader})})}},e=>{var t=t=>e(e.s=t);e.O(0,[438,13,498,61,115,441,684,358],()=>t(5089)),_N_E=e.O()}]);